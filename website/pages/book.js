import { query, send } from "../utilities";
let titleHeading = document.getElementById("titleHeading");
let authorHeading = document.getElementById("authorHeading");
let coverImg = document.getElementById("coverImg");
let uploaderHeading = document.getElementById("uploaderHeading");
let favoriteDiv = document.getElementById("favoriteDiv");
let favoriteCheckbox = document.getElementById("favoriteCheckbox");
let descriptionDiv = document.getElementById("descriptionDiv");
let userId = localStorage.getItem("userId");
let bookId = Number(query["bookId"]);
console.log(query);
console.log(query["bookId"]);
appendBook();
favoriteCheckbox.onchange = function () {
    if (favoriteCheckbox.checked) {
        send("addToFavorites", [userId, bookId]);
    }
    else {
        send("removeFromFavorites", [userId, bookId]);
    }
};
async function appendBook() {
    let [book, uploader, isFavorite] = await send("getBookInfo", [userId, bookId]);
    document.title = book.Title;
    titleHeading.innerText = book.Title;
    authorHeading.innerText = `by ${book.Author}`;
    uploaderHeading.innerText = `Uploaded by ${uploader}`;
    coverImg.src = book.ImageSource;
    if (userId != null) {
        favoriteDiv.classList.remove("hidden");
        favoriteCheckbox.checked = isFavorite;
    }
    descriptionDiv.innerText = book.Description;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9vay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJvb2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFFM0MsSUFBSSxZQUFZLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQXVCLENBQUM7QUFDakYsSUFBSSxhQUFhLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQXVCLENBQUM7QUFDbkYsSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQXFCLENBQUM7QUFDdkUsSUFBSSxlQUFlLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBdUIsQ0FBQztBQUN2RixJQUFJLFdBQVcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBbUIsQ0FBQztBQUMzRSxJQUFJLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQXFCLENBQUM7QUFDdkYsSUFBSSxjQUFjLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBbUIsQ0FBQztBQUVqRixJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVDLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUVyQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFFN0IsVUFBVSxFQUFFLENBQUM7QUFFYixnQkFBZ0IsQ0FBQyxRQUFRLEdBQUc7SUFDMUIsSUFBSSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7UUFDNUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7S0FDMUM7U0FDSTtRQUNILElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0tBQy9DO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsS0FBSyxVQUFVLFVBQVU7SUFDdkIsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLEdBQUcsTUFBTSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUE0QixDQUFDO0lBRTFHLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUM1QixZQUFZLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEMsYUFBYSxDQUFDLFNBQVMsR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM5QyxlQUFlLENBQUMsU0FBUyxHQUFHLGVBQWUsUUFBUSxFQUFFLENBQUE7SUFDckQsUUFBUSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBRWhDLElBQUksTUFBTSxJQUFJLElBQUksRUFBRTtRQUNsQixXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN2QyxnQkFBZ0IsQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDO0tBQ3ZDO0lBRUQsY0FBYyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO0FBQzlDLENBQUMifQ==